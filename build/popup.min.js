!function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();t.GithubOAuth2LocalStorage=function(){function e(){o(this,e),this._tokenKey="github_oauth2_token"}return n(e,[{key:"getAuthorizationToken",value:function(){try{var e=JSON.parse(localStorage.getItem(this._tokenKey));return e||null}catch(e){return null}}},{key:"removeAuthorizationToken",value:function(e){localStorage.removeItem(this._tokenKey)}},{key:"saveAuthorizationToken",value:function(e){localStorage.setItem(this._tokenKey,JSON.stringify(e))}}]),e}()},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Background=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=r(2),s=r(0);t.Background=function(){function e(){o(this,e),this._domainURL="https://api.github.com",this._repositoriesLocalStorage=new i.RepositoriesLocalStorage(3600),this._githubOAuth2LocalStorage=new s.GithubOAuth2LocalStorage}return n(e,[{key:"getAllRepositories",value:function(){var e=this,t=this._repositoriesLocalStorage.loadRepositories();return t?Promise.resolve(t):this._getRepositories().then(function(t){return e._repositoriesLocalStorage.saveRepositories(t),t})}},{key:"searchRepositories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"stars",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc";return this._getRepositories(e,t,r,o)}},{key:"getMyRepositories",value:function(){var e=this._domainURL+"/user/repos",t=this._githubOAuth2LocalStorage.getAuthorizationToken();return fetch(e,{headers:new Headers({Authorization:"token "+t.accessToken})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})}},{key:"getMyAccount",value:function(){var e=this._domainURL+"/user",t=this._githubOAuth2LocalStorage.getAuthorizationToken();return fetch(e,{headers:new Headers({Authorization:"token "+t.accessToken})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})}},{key:"_getRepositories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"stars",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc",n=this._domainURL+"/search/repositories",i=n+"?q=is:public";return e&&(i=i+"+"+e+" in:name"),t&&(i=i+"+user:"+t),i=i+"&sort="+r+"&order="+o,fetch(i).then(function(e){return e.json()}).catch(function(e){return console.log(e)})}}]),e}()},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();t.RepositoriesLocalStorage=function(){function e(t){o(this,e),this._key="_repositories",this._expirationInSecond=t}return n(e,[{key:"loadRepositories",value:function(){try{var e=JSON.parse(localStorage.getItem(this._key));return e&&(new Date).getTime()<e.timestamp?e.repositories:null}catch(e){return null}}},{key:"saveRepositories",value:function(e){var t=1e3*this._expirationInSecond,r={repositories:e,timestamp:(new Date).getTime()+t};localStorage.setItem(this._key,JSON.stringify(r))}}]),e}()},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();r(4);var i=r(1),s=r(5),c=function(){function e(){o(this,e),this._background=new i.Background,this._githubAuthorizeProvider=new s.GithubAuthorizeProvider({clientId:"d552e7f73440013d1e32",clientSecret:"c1972f67e3de10302aa732e17dca4f0f8ab5c560",scope:"user repo"}),this.prepareSearchRepositories()}return n(e,[{key:"prepareSearchRepositories",value:function(){var e=this,t=document.querySelector("#searchRepositoriesContainer"),r=t.querySelector("table"),o=r.querySelector("i.starsSort"),n=r.querySelector("i.updatedSort"),i=r.querySelector("i.forksSort"),s=t.querySelector("input[name='repositoryName']"),c=t.querySelector("input[name='repositoryAuthor']"),a=t.querySelector("#searchRepositories"),u=t.querySelector("#backToListRepositories"),l={STARS:"stars",FORKS:"forks",UPDATED:"updated"},d={starsDesc:!0,updatedDesc:!0,forksDesc:!0},h={name:"stars",order:"desc"};o.addEventListener("click",function(t){d.starsDesc=!d.starsDesc,h.name="stars",h.order=d.starsDesc?"desc":"asc",e.renderSearchRepositories(s.value,c.value,h.name,h.order)}),n.addEventListener("click",function(t){d.updatedDesc=!d.updatedDesc,h.name="updated",h.order=d.updatedDesc?"desc":"asc",e.renderSearchRepositories(s.value,c.value,h.name,h.order)}),i.addEventListener("click",function(t){d.forksDesc=!d.forksDesc,h.name="forks",h.order=d.forksDesc?"desc":"asc",e.renderSearchRepositories(s.value,c.value,h.name,h.order)}),a.addEventListener("click",function(t){e.renderSearchRepositories(s.value,c.value,l.STARS,"desc")}),u.addEventListener("click",function(t){e.backToListRepositories()})}},{key:"renderAllRepositories",value:function(){var e=this;return this._background.getAllRepositories().then(function(t){var r=document.querySelector("#searchRepositoriesContainer > .listRepositories > table tbody"),o=t.items.map(function(e){return{id:e.id,name:e.name,ownerName:e.owner.login,stars:e.watchers,issues:e.open_issues,forks:e.forks,updated:e.pushed_at,eventObject:e}});e._renderRepositories(r,o)})}},{key:"renderSelectedRepository",value:function(e,t){var r=document.querySelector("#searchRepositoriesContainer"),o=r.querySelector(".listRepositories"),n=r.querySelector(".selectedRepository");o.classList.add("d-none"),n.classList.remove("d-none");var i=n.querySelector(".repoURL");i.textContent=e.clone_url,i.setAttribute("href",e.clone_url),n.querySelector(".repoName").textContent=e.name,n.querySelector(".repoUserName").textContent=e.owner.login,n.querySelector(".repoStars").textContent=e.watchers,n.querySelector(".repoIssues").textContent=e.open_issues,n.querySelector(".repoForks").textContent=e.forks}},{key:"backToListRepositories",value:function(){var e=document.querySelector("#searchRepositoriesContainer"),t=e.querySelector(".listRepositories"),r=e.querySelector(".selectedRepository");t.classList.remove("d-none"),r.classList.add("d-none")}},{key:"renderSearchRepositories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"stars",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc";return this._background.searchRepositories(e,t,o,n).then(function(e){var t=document.querySelector("#searchRepositoriesContainer > .listRepositories > table tbody"),o=e.items.map(function(e){return{id:e.id,name:e.name,ownerName:e.owner.login,stars:e.watchers,issues:e.open_issues,forks:e.forks,updated:e.pushed_at,eventObject:e}});r._renderRepositories(t,o)})}},{key:"renderMyRepositories",value:function(){var e=this;return this._background.getMyRepositories().then(function(t){var r=document.querySelector("#myRepositoriesContainer > table tbody"),o=t.map(function(e){return{id:e.id,name:e.name,stars:e.watchers,issues:e.open_issues,forks:e.forks,updated:e.pushed_at}});e._renderRepositories(r,o)})}},{key:"renderMyAccount",value:function(){return this._background.getMyAccount().then(function(e){document.querySelector("#userName").textContent=e.login})}},{key:"prepareAuthorization",value:function(){var e=this;document.querySelector("#login").addEventListener("click",function(){return e._githubAuthorizeProvider.login().then(function(){e.checkAuthorized()})}),document.querySelector("#logout").addEventListener("click",function(){e._githubAuthorizeProvider.logout(),e.checkAuthorized()}),this.checkAuthorized()}},{key:"checkAuthorized",value:function(){var e=document.querySelector("#login");this._githubAuthorizeProvider.isAuthorized()?(e.classList.add("authorized"),document.querySelector("a[href='#myRepositoriesContainer']").classList.remove("disabled"),document.querySelector("#login").classList.add("d-none"),document.querySelector("#logout").classList.remove("d-none"),this.renderMyAccount(),this.renderMyRepositories()):(document.querySelector("#login").classList.remove("d-none"),document.querySelector("#logout").classList.add("d-none"),e.classList.remove("authorized"),document.querySelector("a[href='#myRepositoriesContainer']").classList.add("disabled"),document.querySelector("#userName").textContent="Anonymous")}},{key:"_renderRepositories",value:function(e,t){var r=this,o=document.createElement("tbody");t.forEach(function(e){var t=document.createElement("tr");Object.keys(e).forEach(function(r){var o=document.createElement("td");o.innerHTML=e[r],t.appendChild(o)}),e.eventObject&&t.addEventListener("click",function(){return r.renderSelectedRepository(e.eventObject)}),o.appendChild(t)}),e.replaceWith(o)}}]),e}();document.addEventListener("DOMContentLoaded",function(e){var t=new c;t.prepareAuthorization(),t.renderAllRepositories()})},function(e,t){},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GithubAuthorizeProvider=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=r(0),s=r(6);t.GithubAuthorizeProvider=function(){function e(t){var r=t.clientId,n=t.clientSecret,c=t.scope;o(this,e);var a=chrome||browser;this._githubOAuth2LocalStorage=new i.GithubOAuth2LocalStorage,this._githubOauth2Adapter=new s.GithubOAuth2Adapter({clientId:r,clientSecret:n,redirectUrl:a.identity.getRedirectURL("provider_cb"),scope:c})}return n(e,[{key:"isAuthorized",value:function(){return null!==this._githubOAuth2LocalStorage.getAuthorizationToken()}},{key:"logout",value:function(){this._githubOAuth2LocalStorage.removeAuthorizationToken()}},{key:"login",value:function(){var e=this,t=function(){var e={},t=new Promise(function(t,r){e.resolve=t,e.reject=r});return e.promise=t,e}();if(null===this._githubOAuth2LocalStorage.getAuthorizationToken()){var r=chrome||browser;chrome.identity.getRedirectURL("provider_cb"),this._githubOauth2Adapter.getAuthorizationCodeURL(),r.identity.launchWebAuthFlow({url:this._githubOauth2Adapter.getAuthorizationCodeURL(),interactive:!0},function(r){if(r){var o=e._githubOauth2Adapter.parseAuthorizationCode(r);e._githubOauth2Adapter.getAccessAndRefreshTokens(o).then(function(r){e._githubOAuth2LocalStorage.saveAuthorizationToken(r),t.resolve()})}})}else t.resolve();return t.promise}}]),e}()},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();t.GithubOAuth2Adapter=function(){function e(t){o(this,e),this.adapterName="github",this.clientId=t.clientId,this.scope=t.scope,this.clientSecret=t.clientSecret,this.redirectUrl=t.redirectUrl}return n(e,[{key:"getAuthorizationCodeURL",value:function(){return"https://github.com/login/oauth/authorize?client_id={{CLIENT_ID}}&scope={{SCOPE}}&redirect_uri={{REDIRECT_URI}}".replace("{{CLIENT_ID}}",this.clientId).replace("{{SCOPE}}",this.scope).replace("{{REDIRECT_URI}}",this.redirectURL())}},{key:"redirectURL",value:function(){return this.redirectUrl}},{key:"parseAuthorizationCode",value:function(e){var t=e.match(/[&\?]error=([^&]+)/);if(t)throw"Error getting authorization code: "+t[1];return e.match(/[&\?]code=([\w\/\-]+)/)[1]}},{key:"accessTokenURL",value:function(){return"https://github.com/login/oauth/access_token"}},{key:"accessTokenMethod",value:function(){return"POST"}},{key:"accessTokenParams",value:function(e){return{code:e,client_id:this.clientId,client_secret:this.clientSecret,redirect_uri:this.redirectURL(),grant_type:"authorization_code"}}},{key:"parseAccessToken",value:function(e){return{accessToken:e.match(/access_token=([^&]*)/)[1],expiresIn:Number.MAX_VALUE}}},{key:"isAccessTokenExpired",value:function(e){return(new Date).valueOf()-token.accessTokenDate>1e3*token.expiresIn}},{key:"getAccessAndRefreshTokens",value:function(e){var t=this,r=new FormData,o=this.accessTokenParams(e);for(var n in o)r.append(n,o[n]);return fetch(this.accessTokenURL(),{method:this.accessTokenMethod(),headers:{},body:r}).then(function(e){if(!e.ok)throw"failed request";return e.text()}).then(function(e){var r=t.parseAccessToken(e);return{accessTokenDate:(new Date).valueOf(),accessToken:r.accessToken,expiresIn:r.expiresIn}}).catch(function(e){throw e})}}]),e}()}]);